<section class="content">
  <div class="content-block">
    <div class="block-header">
      <!-- breadcrumb -->
      <app-breadcrumb [title]="'Add Applications'" [items]="['Crew','Applications']" [active_item]="'Add Applications'">
      </app-breadcrumb>
    </div>
    <div class="row clearfix ">
      <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
        <div class="box-shadow">
          <div class="card">
            <div class="body">


              <form class="m-4" [formGroup]="docForm">

                <br>
                <h4>Main Details</h4>
                <hr style="margin-top: 10px; border: 1px solid #000;">
                <div class="row">
                  <div class="col-md-10">

                    <div class="row">

                      <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                        <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                          <mat-label>Surname</mat-label>
                          <input matInput formControlName="surname">
                        </mat-form-field>
                      </div>



                      <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                        <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                          <mat-label>Name</mat-label>
                          <input matInput formControlName="name">
                        </mat-form-field>
                      </div>


                      <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                        <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                          <mat-label> Middle Name</mat-label>
                          <input matInput formControlName="midname">
                        </mat-form-field>
                      </div>


                      <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                   

                        <app-searchable-select [options]="nationalitylist" placeholderLabel="Search for Nationality"
                        noEntriesFoundLabel="No results found" [label]="'Nationality'" formControlName="nation"
                        [required]="false" [errorMessage]="'Nationality is required'">
                      </app-searchable-select>


                      </div>

                    </div>


                    <div class="row">

                      <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">

                        <app-searchable-select [options]="rankdrop" placeholderLabel="Search for rank"
                          noEntriesFoundLabel="No results found" [label]="'Rank'" formControlName="rank"
                          [required]="false" [errorMessage]="'Rank is required'">
                        </app-searchable-select>
                      </div>


                      <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">



                        <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                          <mat-label> Birth Date </mat-label>
                          <input matInput [matDatepicker]="datepicker1" [max]="toDay" formControlName="dobObj" id="dob"
                            (dateInput)="$event.value.format('DD/MM/YYYY')"
                            (dateChange)="getDateString($event, 'dob',0)" placeholder="dd/mm/yyyy">
                          <mat-datepicker-toggle matSuffix [for]="datepicker1"></mat-datepicker-toggle>
                          <mat-datepicker #datepicker1></mat-datepicker>

                        </mat-form-field>
                      </div>

                      <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                        <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                          <mat-label>Father</mat-label>
                          <input matInput formControlName="father">
                        </mat-form-field>
                      </div>

                      <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                        <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                          <mat-label>Mother</mat-label>
                          <input matInput formControlName="mother">
                        </mat-form-field>
                      </div>

                    </div>


                    <div class="row">


                      <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                        <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                          <mat-label>Birth Place</mat-label>
                          <input matInput formControlName="birthplace">
                        </mat-form-field>
                      </div>


                      <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                        
                        
                        <app-searchable-select [options]="vessellist" placeholderLabel="Search for vessel"
                          noEntriesFoundLabel="No results found" [label]="'Exp.Vessels'" formControlName="vessel"
                          [required]="false" [errorMessage]="'Exp.Vessels is required'">
                        </app-searchable-select>
                      </div>

                      <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                        <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                          <mat-label>prior Exp.Months</mat-label>
                          <input matInput formControlName="priormonth">
                        </mat-form-field>
                      </div>

                      <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                    

                        <app-searchable-select [options]="decisioncodelist" placeholderLabel="Search for Decision Code"
                        noEntriesFoundLabel="No results found" [label]="'Decision Code'" formControlName="decisioncode"
                        [required]="false" [errorMessage]="'Decision Code is required'">
                      </app-searchable-select>


                      </div>

                    </div>

                    <div class="row">

                      <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                      

                        <app-searchable-select [options]="enginelist" placeholderLabel="Search for Exp.Engine"
                        noEntriesFoundLabel="No results found" [label]="'Exp.Engine'" formControlName="engine"
                        [required]="false" [errorMessage]="'Exp.Engine is required'">
                      </app-searchable-select>


                      </div>

                      <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                        <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                          <mat-label> Last Sign Off Date </mat-label>
                          <input matInput [matDatepicker]="datepicker2" formControlName="signOffDateObj"
                            id="signOffDate" (dateInput)="$event.value.format('DD/MM/YYYY')"
                            (dateChange)="getDateString($event, 'signOffDate',0)" placeholder="dd/mm/yyyy">
                          <mat-datepicker-toggle matSuffix [for]="datepicker2"></mat-datepicker-toggle>
                          <mat-datepicker #datepicker2></mat-datepicker>
                        </mat-form-field>
                      </div>


                      <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
        

                        <app-searchable-select [options]="agentlist" placeholderLabel="Search for Agent"
                        noEntriesFoundLabel="No results found" [label]="'Agent'" formControlName="agent"
                        [required]="false" [errorMessage]="'Agent is required'">
                      </app-searchable-select>
                      </div>

                      <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                        <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                          <mat-label>Remarks</mat-label>
                          <input matInput formControlName="remarks">
                        </mat-form-field>
                      </div>
                    </div>


                    <div class="row">

                      <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                        <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                          <mat-label> Application Date </mat-label>
                          <input matInput [matDatepicker]="datepicker3" formControlName="appDateObj" id="appDate"
                            (dateInput)="$event.value.format('DD/MM/YYYY')"
                            (dateChange)="getDateString($event, 'appDate',0)" placeholder="dd/mm/yyyy">
                          <mat-datepicker-toggle matSuffix [for]="datepicker3"></mat-datepicker-toggle>
                          <mat-datepicker #datepicker3></mat-datepicker>
                        </mat-form-field>
                      </div>

                      <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                        <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                          <mat-label>Recom.By</mat-label>
                          <input matInput formControlName="recom">
                        </mat-form-field>
                      </div>

                      <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                        <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                          <mat-label> Avail.From Date </mat-label>
                          <input matInput [matDatepicker]="datepicker4" formControlName="availfromDateObj"
                            id="availfromDate" (dateInput)="$event.value.format('DD/MM/YYYY')"
                            (dateChange)="getDateString($event, 'availfromDate',0)" placeholder="dd/mm/yyyy">
                          <mat-datepicker-toggle matSuffix [for]="datepicker4"></mat-datepicker-toggle>
                          <mat-datepicker #datepicker4></mat-datepicker>
                        </mat-form-field>
                      </div>
                    </div>


                  </div>


                  <div class="col-md-2">




                    <div style="background:#808080; color: white; padding: 8px 12px; margin-bottom: 10px;">
                      <b>Applicant:</b>
                    </div>
                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
                      <div>
                        <img *ngFor="let preview of previews" style="height: 245px;width: 215px;" [src]="preview"
                          class="preview" />
                      </div><br>
                      <div class="row">
                        <div class="col-12">
                          <label class="btn btn-default p-0">
                            <input type="file" accept="image/*" multiple (change)="selectFiles($event)" />
                          </label>
                        </div>
                        <!--                   
                    <div class="col-4">
                      <button
                        class="btn btn-success btn-sm"
                        [disabled]="!selectedFiles"
                        (click)="uploadFiles()" >
                        Upload
                      </button>
                    </div> -->


                      </div>

                    </div>

                    <br>
                    <div style="background:#808080; color: white; padding: 6px 12px; margin-bottom: 10px;">
                      <b>C.V.Operations:</b>
                    </div>
                    <div class=" col-md-12 ">

                      <app-file-upload (change)="uploadFile($event)">
                      </app-file-upload>

                    </div>


                  </div>
                </div>

                <br> <br> <br>
                <h4>Documents</h4>
                <hr style="margin-top: 10px; border: 1px solid #000;">
                <div class="row">

                  <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                    <mat-label><b>File Upload</b></mat-label>
                    <app-file-upload (change)="uploadFileDoc1($event)">
                    </app-file-upload>

                  </div>



                  <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label>S.Book</mat-label>
                      <input matInput formControlName="book">
                    </mat-form-field>
                  </div>

                  <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label>Issue</mat-label>
                      <input matInput formControlName="issue">
                    </mat-form-field>
                  </div>

                  <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label> Expiry </mat-label>
                      <input matInput [matDatepicker]="datepicker5" formControlName="expiryDateObj" id="expiryDate"
                        (dateInput)="$event.value.format('DD/MM/YYYY')"
                        (dateChange)="getDateString($event, 'expiryDate',0)" placeholder="dd/mm/yyyy">
                      <mat-datepicker-toggle matSuffix [for]="datepicker5"></mat-datepicker-toggle>
                      <mat-datepicker #datepicker5></mat-datepicker>
                    </mat-form-field>
                  </div>

                </div>



                <div class="row">

                  <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                    <mat-label><b>File Upload</b></mat-label>
                    <app-file-upload (change)="uploadFileDoc2($event)">
                    </app-file-upload>

                  </div>
                  <!-- <div class="col-xl-1 col-lg-1 col-md-12 col-sm-12">
                  <button (click)="addFile()" style="margin-left: -21px;margin-top: 37px;"type="button" mat-mini-fab color="primary">
                    
                      <mat-icon class="col-white">add</mat-icon>
                  </button>
             </div>
             <div class="row" >   
                <div class="col-xl-1 col-lg-1 col-md-12 col-sm-12">
                  </div>
        
                   <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12" *ngIf="!edit">
                    <mat-label><b>Files</b></mat-label>
                    <div *ngFor="let link of this.docForm.value.files; let index = index">
                        <a id="tbnewExport{{index}}" style="display: none" [href]="filePathdata + '/' + link" download="{{link}}"></a>-->
                  <!-- <div>
                          {{index + 1}}  <a (click)="downloadNewFile(index)" style="color: green">{{link}}</a>
                          <button class="btn btn-default input-sm" type="button" (click)="deleteuploadfiles(index)" data-toggle="tooltip" title="Delete file">
                            <i class="fa fa-trash"></i>
                          </button>
                        </div> -->
                  <!--  </div>
                    </div>
                  
                </div> -->


                  <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label>Passport</mat-label>
                      <input matInput formControlName="passport">
                    </mat-form-field>
                  </div>

                  <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label> Issue </mat-label>
                      <input matInput formControlName="passportissue">
                    </mat-form-field>
                  </div>

                  <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label> Expiry </mat-label>
                      <input matInput [matDatepicker]="datepicker6" formControlName="passportExpiryDateObj"
                        id="passportExpiryDate" (dateInput)="$event.value.format('DD/MM/YYYY')"
                        (dateChange)="getDateString($event, 'passportExpiryDate',0)" placeholder="dd/mm/yyyy">
                      <mat-datepicker-toggle matSuffix [for]="datepicker6"></mat-datepicker-toggle>
                      <mat-datepicker #datepicker6></mat-datepicker>
                    </mat-form-field>
                  </div>

                </div>



                <div class="row">
                  <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                  </div>
                  <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                   
                    <app-searchable-select [options]="licencedata" placeholderLabel="Search forLicence"
                    noEntriesFoundLabel="No results found" [label]="'Licence'" formControlName="licence"
                    [required]="false" [errorMessage]="'Licence is required'">
                  </app-searchable-select>
                  </div>

                  <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label> Issue </mat-label>
                      <input matInput formControlName="licenceissue">
                    </mat-form-field>
                  </div>

                  <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label> Expiry </mat-label>
                      <input matInput [matDatepicker]="datepicker7" formControlName="licenceExpiryDateObj"
                        id="licenceExpiryDate" (dateInput)="$event.value.format('DD/MM/YYYY')"
                        (dateChange)="getDateString($event, 'licenceExpiryDate',0)" placeholder="dd/mm/yyyy">
                      <mat-datepicker-toggle matSuffix [for]="datepicker7"></mat-datepicker-toggle>
                      <mat-datepicker #datepicker7></mat-datepicker>
                    </mat-form-field>
                  </div>



                </div>


                <div class="row">
                  <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                  </div>
                  <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label> Grade </mat-label>
                      <input matInput formControlName="grade">
                    </mat-form-field>
                  </div>

                  <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label>Licence No</mat-label>
                      <input matInput formControlName="licenceno">
                    </mat-form-field>
                    
                  </div>

                </div>


                <br><br>

                <br>

                <h4>Address</h4>
                <hr style="margin-top: 10px; border: 1px solid #000;">
                <div class="row">
                  <div class="col-xl-1 col-lg-4 col-md-12 col-sm-12">
                  </div>
                  <div class="col-xl-5 col-lg-6 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label>Next of Kin</mat-label>
                      <input matInput formControlName="kin">
                    </mat-form-field>
                  </div>


                  <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label>City</mat-label>
                      <input matInput formControlName="city">
                    </mat-form-field>
                  </div>

                  <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                    <button class="btn-space saveBtn" mat-raised-button (click)="checkList()" style="  background-color: #3191f8">CheckList</button>

                  </div>


                 
                </div>

                <div class="row">


                  <div class="col-xl-1 col-lg-4 col-md-12 col-sm-12">
                  </div>
                  <div class="col-xl-5 col-lg-6 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label>Address 1</mat-label>
                      <input matInput formControlName="address1">
                    </mat-form-field>
                  </div>
                  <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label>Tel 1</mat-label>
                      <input matInput formControlName="tel1">
                    </mat-form-field>
                  </div>

                </div>

                <div class="row">

                  <div class="col-xl-1 col-lg-4 col-md-12 col-sm-12">
                  </div>
                  <div class="col-xl-5 col-lg-6 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label>Address 2</mat-label>
                      <input matInput formControlName="address2">
                    </mat-form-field>
                  </div>
                  <div class="col-xl-3 col-lg-4 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label>Tel 2</mat-label>
                      <input matInput formControlName="tel2">
                    </mat-form-field>
                  </div>

                </div>



           
                <div class="center">
                  <button *ngIf="!edit" class="btn-space saveBtn" mat-raised-button (click)="onSubmit()"><mat-icon class="saveCancelIcon">save</mat-icon>Save</button>
                  <button *ngIf="edit" class="btn-space saveBtn" mat-raised-button (click)="update()"><mat-icon class="saveCancelIcon">save</mat-icon>Update</button>
                  <button class="cancelBtn" type="button" mat-button (click)="onCancel()"><mat-icon class="saveCancelIcon">cancel</mat-icon>Cancel</button>
                        </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>